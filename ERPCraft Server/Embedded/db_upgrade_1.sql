ALTER TABLE public.config ALTER COLUMN ver SET DEFAULT 2; CREATE TABLE public.notificaciones ( id timestamp(3) without time zone NOT NULL DEFAULT CURRENT_TIMESTAMP(3), name character varying(50) COLLATE pg_catalog."default" NOT NULL, dsc character varying(250) COLLATE pg_catalog."default" NOT NULL, leido boolean NOT NULL DEFAULT false, origen smallint NOT NULL DEFAULT 0, CONSTRAINT notificaciones_pkey PRIMARY KEY (id) ) CREATE INDEX notif_leido ON public.notificaciones USING btree (leido DESC NULLS LAST) TABLESPACE pg_default; CREATE TABLE public.alm_inv_notificacion ( alm smallint NOT NULL, id smallint NOT NULL, name character varying(50) COLLATE pg_catalog."default" NOT NULL, art smallint NOT NULL, modo "char" NOT NULL, cantidad integer NOT NULL, CONSTRAINT alm_inv_notificacion_pkey PRIMARY KEY (alm, id), CONSTRAINT alm_alm_inv_not FOREIGN KEY (alm) REFERENCES public.almacenes (id) MATCH SIMPLE ON UPDATE CASCADE ON DELETE CASCADE NOT VALID, CONSTRAINT art_alm_inv_not FOREIGN KEY (art) REFERENCES public.articulos (id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION NOT VALID ) CREATE TRIGGER set_alm_inv_notificacion_id BEFORE INSERT ON public.alm_inv_notificacion FOR EACH ROW EXECUTE PROCEDURE public.set_alm_inv_notificacion_id(); ALTER TABLE public.bat ADD COLUMN notif boolean NOT NULL DEFAULT false; ALTER TABLE public.bat ADD COLUMN notif_carga bigint NOT NULL DEFAULT 0; ALTER TABLE public.config ADD COLUMN lim_notif boolean NOT NULL DEFAULT true; ALTER TABLE public.config ADD COLUMN horas_notif smallint NOT NULL DEFAULT 48; ALTER TABLE public.drones ALTER COLUMN date_upd TYPE timestamp(3) without time zone ; ALTER TABLE public.drones ADD COLUMN notif_con boolean NOT NULL DEFAULT false; ALTER TABLE public.drones ADD COLUMN notif_descon boolean NOT NULL DEFAULT false; ALTER TABLE public.drones ADD COLUMN notif_bat_baj boolean NOT NULL DEFAULT false; ALTER TABLE public.gen ADD COLUMN notif boolean NOT NULL DEFAULT false; ALTER TABLE public.ordenes_minado ADD COLUMN notif boolean NOT NULL DEFAULT false; ALTER TABLE public.robots ADD COLUMN notif_con boolean NOT NULL DEFAULT false; ALTER TABLE public.robots ADD COLUMN notif_descon boolean NOT NULL DEFAULT false; ALTER TABLE public.robots ADD COLUMN notif_bat_baj boolean NOT NULL DEFAULT false; ALTER TABLE public.servers ADD COLUMN notif_on boolean NOT NULL DEFAULT false; ALTER TABLE public.servers ADD COLUMN notif_off boolean NOT NULL DEFAULT false; ALTER TABLE public.servers ADD COLUMN date_add timestamp(3) without time zone NOT NULL DEFAULT CURRENT_TIMESTAMP(3); DROP INDEX public.uuid; CREATE UNIQUE INDEX uuid ON public.robots USING btree (uuid ASC NULLS LAST) TABLESPACE pg_default;